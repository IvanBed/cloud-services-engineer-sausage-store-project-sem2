
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.6.2)

[INFO ] 2025-09-18 18:25:57.384 [main] SausageApplication - Starting SausageApplication v9441f9772ab6978063ccb3a3b783f8239925bd71 using Java 16-ea on sausage-store-backend-7dcbbf7bf8-xkh7c with PID 7 (/app/sausage-store.jar started by jaruser in /app)
[INFO ] 2025-09-18 18:25:57.397 [main] SausageApplication - No active profile set, falling back to default profiles: default
[INFO ] 2025-09-18 18:26:00.285 [main] RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
[INFO ] 2025-09-18 18:26:00.288 [main] RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
[INFO ] 2025-09-18 18:26:00.461 [main] RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 163 ms. Found 3 JPA repository interfaces.
[INFO ] 2025-09-18 18:26:00.469 [main] RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode!
[INFO ] 2025-09-18 18:26:00.470 [main] RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
[INFO ] 2025-09-18 18:26:00.473 [main] RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.yandex.practicum.devops.repository.OrderRepository. If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository.
[INFO ] 2025-09-18 18:26:00.474 [main] RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.yandex.practicum.devops.repository.OrderProductRepository. If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository.
[INFO ] 2025-09-18 18:26:00.474 [main] RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.yandex.practicum.devops.repository.ProductRepository. If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository.
[INFO ] 2025-09-18 18:26:00.474 [main] RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 MongoDB repository interfaces.
[INFO ] 2025-09-18 18:26:01.071 [main] GenericScope - BeanFactory id=a3a5b61c-acdc-3e6c-a37e-f534aa2be17c
[INFO ] 2025-09-18 18:26:02.298 [main] TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
[INFO ] 2025-09-18 18:26:02.360 [main] Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
[INFO ] 2025-09-18 18:26:02.361 [main] StandardService - Starting service [Tomcat]
[INFO ] 2025-09-18 18:26:02.362 [main] StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.56]
[INFO ] 2025-09-18 18:26:02.494 [main] [/] - Initializing Spring embedded WebApplicationContext
[INFO ] 2025-09-18 18:26:02.494 [main] ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4921 ms
[INFO ] 2025-09-18 18:26:02.988 [main] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2025-09-18 18:26:03.492 [main] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2025-09-18 18:26:03.560 [main] H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:postgresql://postgresql:5432/sausage-store'
[INFO ] 2025-09-18 18:26:04.479 [main] VersionPrinter - Flyway Community Edition 8.0.5 by Redgate
[INFO ] 2025-09-18 18:26:04.480 [main] BaseDatabaseType - Database: jdbc:postgresql://postgresql:5432/sausage-store (PostgreSQL 15.14)
[WARN ] 2025-09-18 18:26:04.562 [main] Database - Flyway upgrade recommended: PostgreSQL 15.14 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 14.
[WARN ] 2025-09-18 18:26:04.687 [main] AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 001
-> Applied to database : -1117422440
-> Resolved locally    : 930189385. Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
[INFO ] 2025-09-18 18:26:04.687 [main] HikariDataSource - HikariPool-1 - Shutdown initiated...
[INFO ] 2025-09-18 18:26:04.694 [main] HikariDataSource - HikariPool-1 - Shutdown completed.
[INFO ] 2025-09-18 18:26:04.760 [main] StandardService - Stopping service [Tomcat]
[INFO ] 2025-09-18 18:26:04.776 [main] ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
[ERROR] 2025-09-18 18:26:04.860 [main] SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 001
-> Applied to database : -1117422440
-> Resolved locally    : 930189385. Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.14.jar!/:5.3.14]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.14.jar!/:5.3.14]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.14.jar!/:5.3.14]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.2.jar!/:2.6.2]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) [spring-boot-2.6.2.jar!/:2.6.2]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412) [spring-boot-2.6.2.jar!/:2.6.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:302) [spring-boot-2.6.2.jar!/:2.6.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) [spring-boot-2.6.2.jar!/:2.6.2]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) [spring-boot-2.6.2.jar!/:2.6.2]
	at com.yandex.practicum.devops.SausageApplication.main(SausageApplication.java:16) [classes!/:9441f9772ab6978063ccb3a3b783f8239925bd71]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:567) ~[?:?]
	at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) [sausage-store.jar:9441f9772ab6978063ccb3a3b783f8239925bd71]
	at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) [sausage-store.jar:9441f9772ab6978063ccb3a3b783f8239925bd71]
	at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) [sausage-store.jar:9441f9772ab6978063ccb3a3b783f8239925bd71]
	at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) [sausage-store.jar:9441f9772ab6978063ccb3a3b783f8239925bd71]
Caused by: org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 001
-> Applied to database : -1117422440
-> Resolved locally    : 930189385. Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:131) ~[flyway-core-8.0.5.jar!/:?]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:124) ~[flyway-core-8.0.5.jar!/:?]
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:214) ~[flyway-core-8.0.5.jar!/:?]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:124) ~[flyway-core-8.0.5.jar!/:?]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.6.2.jar!/:2.6.2]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.14.jar!/:5.3.14]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.14.jar!/:5.3.14]
	... 26 more
